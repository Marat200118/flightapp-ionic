<!-- flight-details.page.html -->

<ion-header>
  <ion-toolbar class="details-header">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/tab1"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ flight.flightDetails.ident_iata || 'Flight Details' }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="custom-content">
  <div class="flight-summary">
    <p class="flight-time">{{ flight.flightDetails.ident_iata }}</p>
    <div class="flight-route">
      <div>
        <p class="airport-code">{{ flight.flightDetails.origin_iata }}</p>
        <p class="airport-name">Departure</p>
        <p class="outbound-time">{{ flight.flightDetails.scheduled_out | date: 'HH:mm' }}</p>
      </div>
      <ion-icon name="airplane-outline"></ion-icon>
      <div>
        <p class="airport-code">{{ flight.flightDetails.destination_iata }}</p>
        <p class="airport-name">Arrival</p>
        <p class="inbound-time">{{ flight.flightDetails.scheduled_in | date: 'HH:mm' }}</p>
      </div>
    </div>
  </div>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Flight Information</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p><strong>Airline:</strong> {{ flight.flightDetails.ident_icao || 'Unknown' }}</p>
      <p><strong>Scheduled Departure:</strong> {{ flight.flightDetails.scheduled_out | date: 'yyyy-MM-dd HH:mm' }}</p>
      <p><strong>Scheduled Arrival:</strong> {{ flight.flightDetails.scheduled_in | date: 'yyyy-MM-dd HH:mm' }}</p>
      <p><strong>Aircraft Type:</strong> {{ flight.flightDetails.aircraft_type || 'Unknown' }}</p>
      <p><strong>Meal Service:</strong> {{ flight.flightDetails.meal_service || 'None' }}</p>
      <p>
        <strong>Seats:</strong> Business: {{ flight.flightDetails.seats_cabin_business || 0 }},
        Coach: {{ flight.flightDetails.seats_cabin_coach || 0 }},
        First: {{ flight.flightDetails.seats_cabin_first || 0 }}
      </p>
    </ion-card-content>
  </ion-card>
  
  <ion-card *ngIf="flight.actualFlight">
    <ion-card-header>
      <ion-card-title>Actual Flight</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p><strong>Callsign:</strong> {{ flight.actualFlight.callsign }}</p>
      <p><strong>Departure Airport:</strong> {{ flight.actualFlight.estDepartureAirport }}</p>
      <p><strong>Arrival Airport:</strong> {{ flight.actualFlight.estArrivalAirport }}</p>
      <p><strong>Departure Time:</strong> {{ flight.actualFlight.firstSeen * 1000 | date: 'yyyy-MM-dd HH:mm:ss' }}</p>
      <p><strong>Arrival Time:</strong> {{ flight.actualFlight.lastSeen * 1000 | date: 'yyyy-MM-dd HH:mm:ss' }}</p>
    </ion-card-content>
  </ion-card>
  
  <ion-card *ngIf="flight.actualFlight?.flightPath">
    <ion-card-header>
      <ion-card-title>Flight Path</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ul>
        <li *ngFor="let waypoint of flight.actualFlight.flightPath">
          <strong>Time:</strong> {{ waypoint[0] * 1000 | date: 'yyyy-MM-dd HH:mm:ss' }}<br />
          <strong>Latitude:</strong> {{ waypoint[1] }}<br />
          <strong>Longitude:</strong> {{ waypoint[2] }}<br />
          <strong>Altitude:</strong> {{ waypoint[3] || 'N/A' }} meters<br />
        </li>
      </ul>
    </ion-card-content>
  </ion-card>
  
  <ion-card *ngIf="!flight.actualFlight?.flightPath">
    <ion-card-header>
      <ion-card-title>No Flight Path Available</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>The flight path is not available at this time.</p>
    </ion-card-content>
  </ion-card>
</ion-content>